2025-12-20 13:04:33.913 [main] ERROR c.s.repository.DatabaseConnection - Failed to initialize database
com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:438)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:189)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:682)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:230)
	at com.study.repository.DatabaseConnection.getConnection(DatabaseConnection.java:52)
	at com.study.repository.DatabaseConnection.initializeSchema(DatabaseConnection.java:56)
	at com.study.repository.DatabaseConnection.<init>(DatabaseConnection.java:37)
	at com.study.repository.DatabaseConnection.getInstance(DatabaseConnection.java:42)
	at com.study.Main.main(Main.java:13)
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:501)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:485)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:104)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:149)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:165)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:88)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:120)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:935)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:805)
	... 10 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:760)
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:153)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:62)
	... 13 common frames omitted
2025-12-20 13:06:10.290 [main] INFO  c.s.repository.DatabaseConnection - Database initialized successfully
2025-12-20 13:06:10.338 [main] INFO  c.s.repository.DatabaseConnection - System already initialized
2025-12-20 13:06:18.362 [main] INFO  com.study.service.AuthService - User logged in: admin, permissions loaded: 24
2025-12-20 13:06:47.314 [main] INFO  com.study.service.UserService - User created: test
2025-12-20 13:13:55.332 [main] ERROR com.study.service.ResourceService - Failed to execute operation, action=CREATE_RESOURCE, resourceType=1, resourceId=BOOK, error=Resource code already exists: BOOK
2025-12-20 13:14:45.444 [main] INFO  com.study.service.AuthService - User logged out: admin
2025-12-20 13:14:50.857 [main] ERROR com.study.service.AuthService - Failed to execute operation, action=LOGIN, resourceType=User, resourceId=admin, error=Invalid password
2025-12-20 13:14:55.722 [main] INFO  com.study.service.AuthService - User logged in: admin, permissions loaded: 24
2025-12-20 13:15:18.047 [main] INFO  com.study.service.RoleService - Role created: TEST
2025-12-20 13:15:38.865 [main] INFO  com.study.service.AuthService - User logged out: admin
2025-12-20 13:37:51.540 [main] INFO  c.s.repository.DatabaseConnection - Database initialized successfully
2025-12-20 13:37:51.605 [main] INFO  c.s.repository.DatabaseConnection - System already initialized
2025-12-20 13:38:05.566 [main] INFO  com.study.service.AuthService - User logged in: admin, permissions loaded: 24
2025-12-20 13:39:38.559 [main] INFO  com.study.service.UserService - User created: LYS
2025-12-20 13:40:53.854 [main] INFO  com.study.service.RoleService - Role 3 assigned to user 2
2025-12-20 13:42:11.633 [main] ERROR com.study.service.PermissionService - Failed to execute operation, action=ASSIGN_SCOPED_PERMISSION, resourceType=1, resourceId=null, error=Scoped permission already exists for this role
2025-12-20 13:42:54.842 [main] ERROR com.study.service.PermissionService - Failed to execute operation, action=ASSIGN_SCOPED_PERMISSION, resourceType=2, resourceId=null, error=Scoped permission already exists for this role
2025-12-20 13:44:28.501 [main] INFO  c.s.repository.DatabaseConnection - Database initialized successfully
2025-12-20 13:44:28.599 [main] INFO  c.s.repository.DatabaseConnection - System already initialized
2025-12-20 13:45:10.145 [main] INFO  com.study.service.AuthService - User logged in: admin, permissions loaded: 24
2025-12-20 13:46:46.735 [main] ERROR com.study.service.PermissionService - Failed to execute operation, action=ASSIGN_SCOPED_PERMISSION, resourceType=2, resourceId=null, error=Scoped permission already exists for this role
2025-12-20 13:59:29.856 [main] INFO  c.s.repository.DatabaseConnection - Database initialized successfully
2025-12-20 13:59:29.893 [main] INFO  c.s.repository.DatabaseConnection - System already initialized
2025-12-20 13:59:35.635 [main] INFO  com.study.service.AuthService - User logged in: admin, permissions loaded: 24
2025-12-20 13:59:47.782 [main] INFO  com.study.service.PermissionService - Permission created: HAVE_CODE
2025-12-20 14:02:41.454 [main] ERROR com.study.service.PermissionService - Failed to execute operation, action=ASSIGN_SCOPED_PERMISSION, resourceType=2, resourceId=4, error=Permission not found: HAVE_GPU
2025-12-20 14:02:52.798 [main] INFO  com.study.service.PermissionService - Permission created: HAVE_GPU
2025-12-20 14:11:51.252 [main] INFO  c.s.repository.DatabaseConnection - Database initialized successfully
2025-12-20 14:11:51.290 [main] INFO  c.s.repository.DatabaseConnection - System already initialized
2025-12-20 14:11:56.721 [main] INFO  com.study.service.AuthService - User logged in: admin, permissions loaded: 24
2025-12-20 14:15:11.083 [main] INFO  c.s.repository.DatabaseConnection - Database initialized successfully
2025-12-20 14:15:11.119 [main] INFO  c.s.repository.DatabaseConnection - System already initialized
2025-12-20 14:15:17.949 [main] INFO  com.study.service.AuthService - User logged in: admin, permissions loaded: 24
2025-12-20 14:17:20.277 [main] INFO  com.study.service.AuthService - User logged out: admin
2025-12-20 14:17:28.452 [main] INFO  com.study.service.AuthService - User logged in: LYS, permissions loaded: 8
2025-12-20 14:18:28.669 [main] INFO  com.study.service.AuthService - User logged out: LYS
2025-12-20 14:18:34.397 [main] INFO  com.study.service.AuthService - User logged in: test, permissions loaded: 8
2025-12-20 14:18:39.184 [main] INFO  com.study.service.AuthService - User logged out: test
2025-12-20 14:18:46.329 [main] INFO  com.study.service.AuthService - User logged in: admin, permissions loaded: 24
2025-12-20 14:19:08.006 [main] ERROR com.study.service.PermissionService - Failed to execute operation, action=VIEW_PERMISSION, resourceType=Permission, resourceId=CREATE_USER, error=Permission not found: CREATE_USER
2025-12-20 14:19:54.571 [main] INFO  com.study.service.PermissionService - Permission 1 assigned to role 2
2025-12-20 14:20:50.703 [main] ERROR com.study.service.PermissionService - Failed to execute operation, action=ASSIGN_SCOPED_PERMISSION, resourceType=1, resourceId=1, error=Permission not found: HAVE_BOOK
2025-12-20 14:21:51.379 [main] ERROR com.study.service.RoleService - Failed to execute operation, action=VIEW_ROLE, resourceType=Role, resourceId=8, error=Role not found: 8
2025-12-20 14:22:30.814 [main] INFO  com.study.service.AuthService - User logged out: admin
2025-12-20 14:22:35.565 [main] INFO  com.study.service.AuthService - User logged in: LYS, permissions loaded: 9
2025-12-20 14:23:04.694 [main] INFO  com.study.service.UserService - User created: test2
2025-12-20 14:24:08.049 [main] INFO  com.study.service.AuthService - Password changed for user: LYS
2025-12-20 14:24:10.327 [main] INFO  com.study.service.AuthService - User logged out: LYS
2025-12-20 14:24:14.977 [main] ERROR com.study.service.AuthService - Failed to execute operation, action=LOGIN, resourceType=User, resourceId=LYS, error=Invalid password
2025-12-20 14:25:43.636 [main] INFO  c.s.repository.DatabaseConnection - Database initialized successfully
2025-12-20 14:25:43.667 [main] INFO  c.s.repository.DatabaseConnection - System already initialized
2025-12-20 14:25:49.964 [main] INFO  com.study.service.AuthService - User logged in: admin, permissions loaded: 24
2025-12-20 14:26:21.104 [main] INFO  com.study.service.UserService - User deleted: test2
2025-12-20 14:26:39.080 [main] INFO  com.study.service.UserService - User LYS disabled
2025-12-20 14:26:55.152 [main] INFO  com.study.service.PermissionService - Permission created: HAVE_BOOK
2025-12-20 14:27:10.689 [main] INFO  com.study.service.AuthService - Permissions refreshed for user: admin, count: 24
2025-12-20 14:27:57.644 [main] INFO  com.study.service.PermissionService - Permission deleted: HAVE_BOOK
2025-12-20 14:29:14.520 [main] INFO  com.study.service.AuthService - User logged out: admin
2025-12-20 14:29:47.696 [main] INFO  c.s.repository.DatabaseConnection - Database initialized successfully
2025-12-20 14:29:47.726 [main] INFO  c.s.repository.DatabaseConnection - System already initialized
2025-12-20 14:29:52.550 [main] INFO  com.study.service.AuthService - User logged in: admin, permissions loaded: 24
2025-12-20 14:30:05.331 [main] INFO  com.study.service.AuthService - User logged out: admin
